(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{354:function(t,e,r){var map={"./af":225,"./af.js":225,"./ar":226,"./ar-dz":227,"./ar-dz.js":227,"./ar-kw":228,"./ar-kw.js":228,"./ar-ly":229,"./ar-ly.js":229,"./ar-ma":230,"./ar-ma.js":230,"./ar-sa":231,"./ar-sa.js":231,"./ar-tn":232,"./ar-tn.js":232,"./ar.js":226,"./az":233,"./az.js":233,"./be":234,"./be.js":234,"./bg":235,"./bg.js":235,"./bm":236,"./bm.js":236,"./bn":237,"./bn.js":237,"./bo":238,"./bo.js":238,"./br":239,"./br.js":239,"./bs":240,"./bs.js":240,"./ca":241,"./ca.js":241,"./cs":242,"./cs.js":242,"./cv":243,"./cv.js":243,"./cy":244,"./cy.js":244,"./da":245,"./da.js":245,"./de":246,"./de-at":247,"./de-at.js":247,"./de-ch":248,"./de-ch.js":248,"./de.js":246,"./dv":249,"./dv.js":249,"./el":250,"./el.js":250,"./en-SG":251,"./en-SG.js":251,"./en-au":252,"./en-au.js":252,"./en-ca":253,"./en-ca.js":253,"./en-gb":254,"./en-gb.js":254,"./en-ie":255,"./en-ie.js":255,"./en-il":256,"./en-il.js":256,"./en-nz":257,"./en-nz.js":257,"./eo":258,"./eo.js":258,"./es":259,"./es-do":260,"./es-do.js":260,"./es-us":261,"./es-us.js":261,"./es.js":259,"./et":262,"./et.js":262,"./eu":263,"./eu.js":263,"./fa":264,"./fa.js":264,"./fi":265,"./fi.js":265,"./fo":266,"./fo.js":266,"./fr":267,"./fr-ca":268,"./fr-ca.js":268,"./fr-ch":269,"./fr-ch.js":269,"./fr.js":267,"./fy":270,"./fy.js":270,"./ga":271,"./ga.js":271,"./gd":272,"./gd.js":272,"./gl":273,"./gl.js":273,"./gom-latn":274,"./gom-latn.js":274,"./gu":275,"./gu.js":275,"./he":276,"./he.js":276,"./hi":277,"./hi.js":277,"./hr":278,"./hr.js":278,"./hu":279,"./hu.js":279,"./hy-am":280,"./hy-am.js":280,"./id":281,"./id.js":281,"./is":282,"./is.js":282,"./it":283,"./it-ch":284,"./it-ch.js":284,"./it.js":283,"./ja":285,"./ja.js":285,"./jv":286,"./jv.js":286,"./ka":287,"./ka.js":287,"./kk":288,"./kk.js":288,"./km":289,"./km.js":289,"./kn":290,"./kn.js":290,"./ko":291,"./ko.js":291,"./ku":292,"./ku.js":292,"./ky":293,"./ky.js":293,"./lb":294,"./lb.js":294,"./lo":295,"./lo.js":295,"./lt":296,"./lt.js":296,"./lv":297,"./lv.js":297,"./me":298,"./me.js":298,"./mi":299,"./mi.js":299,"./mk":300,"./mk.js":300,"./ml":301,"./ml.js":301,"./mn":302,"./mn.js":302,"./mr":303,"./mr.js":303,"./ms":304,"./ms-my":305,"./ms-my.js":305,"./ms.js":304,"./mt":306,"./mt.js":306,"./my":307,"./my.js":307,"./nb":308,"./nb.js":308,"./ne":309,"./ne.js":309,"./nl":310,"./nl-be":311,"./nl-be.js":311,"./nl.js":310,"./nn":312,"./nn.js":312,"./pa-in":313,"./pa-in.js":313,"./pl":314,"./pl.js":314,"./pt":315,"./pt-br":316,"./pt-br.js":316,"./pt.js":315,"./ro":317,"./ro.js":317,"./ru":318,"./ru.js":318,"./sd":319,"./sd.js":319,"./se":320,"./se.js":320,"./si":321,"./si.js":321,"./sk":322,"./sk.js":322,"./sl":323,"./sl.js":323,"./sq":324,"./sq.js":324,"./sr":325,"./sr-cyrl":326,"./sr-cyrl.js":326,"./sr.js":325,"./ss":327,"./ss.js":327,"./sv":328,"./sv.js":328,"./sw":329,"./sw.js":329,"./ta":330,"./ta.js":330,"./te":331,"./te.js":331,"./tet":332,"./tet.js":332,"./tg":333,"./tg.js":333,"./th":334,"./th.js":334,"./tl-ph":335,"./tl-ph.js":335,"./tlh":336,"./tlh.js":336,"./tr":337,"./tr.js":337,"./tzl":338,"./tzl.js":338,"./tzm":339,"./tzm-latn":340,"./tzm-latn.js":340,"./tzm.js":339,"./ug-cn":341,"./ug-cn.js":341,"./uk":342,"./uk.js":342,"./ur":343,"./ur.js":343,"./uz":344,"./uz-latn":345,"./uz-latn.js":345,"./uz.js":344,"./vi":346,"./vi.js":346,"./x-pseudo":347,"./x-pseudo.js":347,"./yo":348,"./yo.js":348,"./zh-cn":349,"./zh-cn.js":349,"./zh-hk":350,"./zh-hk.js":350,"./zh-tw":351,"./zh-tw.js":351};function n(t){var e=o(t);return r(e)}function o(t){if(!r.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}n.keys=function(){return Object.keys(map)},n.resolve=o,t.exports=n,n.id=354},356:function(t,e,r){"use strict";r.r(e);r(32);var n=r(10),o=r(355),l=o.b.reactiveProp,c={extends:o.a,mixins:[l],props:["chartData","options"],watch:{chartData:function(){console.log("chartData updated."),this.$data._chart.update()}},mounted:function(){this.draw()},methods:{draw:function(){this.renderChart(this.chartData,this.options)}}},j=r(48),d=Object(j.a)(c,void 0,void 0,!1,null,null,null).exports,m=[{value:"buy",text:"购买价格"},{value:"day1_am",text:"周一 上午"},{value:"day1_pm",text:"周一 下午"},{value:"day2_am",text:"周二 上午"},{value:"day2_pm",text:"周二 下午"},{value:"day3_am",text:"周三 上午"},{value:"day3_pm",text:"周三 下午"},{value:"day4_am",text:"周四 上午"},{value:"day4_pm",text:"周四 下午"},{value:"day5_am",text:"周五 上午"},{value:"day5_pm",text:"周五 下午"},{value:"day6_am",text:"周六 上午"},{value:"day6_pm",text:"周六 下午"}],h=m.map((function(t){return t.text})),v={components:{LineChart:d},data:function(){return{price:{},targetUserID:"",selectTimeOptions:m,updateForm:{type:"",price:"",week:""},chartData:null,chartOptions:{responsive:!0,maintainAspectRatio:!1},tableData:[]}},computed:{loggedIn:function(){return this.$auth.loggedIn},showLoginAlert:function(){return!this.loggedIn}},mounted:function(){""!=this.$route.hash&&(this.targetUserID=this.$route.hash.substring(1)),this.updateData()},methods:{updateData:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("user/price");case 3:r=e.sent,n=r.data,console.log(n),t.price=n.price,t.updateChart(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),alert("read user failed"+e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},updateChart:function(){var t=this.price,e=[];m.forEach((function(r){console.log(r),e.push(t[r.value])}));var r=e.reverse();console.log(r);var n=[],o=!1;r.forEach((function(t){o?n.push(t):0!=t&&(o=!0,n.push(t))}));var l={labels:h,datasets:[{label:"价格",backgroundColor:"#ffab00",data:[]}]};l.datasets[0].data=n.reverse(),console.info("chartData",l),this.chartData=l;var c=[];m.forEach((function(e){var r={"-":e.text,"价格":t[e.value],"较购买价":(t[e.value]/t.buy*100).toFixed(2)+" %","预测价格":"-"};c.push(r)})),this.tableData=c},updatePrice:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),console.log(JSON.stringify(e.updateForm)),r.prev=2,(n=e.updateForm).price=parseInt(n.price),r.next=7,e.$axios.post("user/price/update",e.updateForm);case 7:if(o=r.sent,(l=o.data).ok){r.next=12;break}return alert("update failed"),r.abrupt("return");case 12:e.price=l.price,e.updateChart(),r.next=20;break;case 16:return r.prev=16,r.t0=r.catch(2),alert("Err:"+data.err),r.abrupt("return");case 20:case"end":return r.stop()}}),r,null,[[2,16]])})))()}}},f=Object(j.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("本周")]),t._v(" "),r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.price-input",modifiers:{"price-input":!0}}],attrs:{variant:"success"}},[t._v("添加数据")]),t._v(" "),r("b-collapse",{staticClass:"mt-2",attrs:{id:"price-input"}},[r("b-alert",{attrs:{show:t.showLoginAlert}},[t._v("登录后添加数据"),r("b-btn",{attrs:{variant:"link",to:"/login"}},[t._v("/login")])],1),t._v(" "),t.loggedIn?r("p",[r("b-form",{on:{submit:t.updatePrice}},[r("b-form-group",{attrs:{id:"ig-time",label:"时间:","label-for":"i-time",description:""}},[r("b-form-select",{attrs:{options:t.selectTimeOptions},model:{value:t.updateForm.type,callback:function(e){t.$set(t.updateForm,"type",e)},expression:"updateForm.type"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"ig-price",label:"价格","label-for":"i-price"}},[r("b-form-input",{attrs:{type:"number",min:"1",required:""},model:{value:t.updateForm.price,callback:function(e){t.$set(t.updateForm,"price",e)},expression:"updateForm.price"}})],1),t._v(" "),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("提交")])],1)],1):t._e()],1),t._v(" "),r("line-chart",{attrs:{chartData:t.chartData,options:t.chartOptions}}),t._v(" "),r("b-table",{attrs:{striped:"",hover:"",small:"",bordered:"",fixed:"",items:t.tableData}})],1)}),[],!1,null,null,null);e.default=f.exports}}]);