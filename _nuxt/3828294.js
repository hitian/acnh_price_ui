(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{361:function(t,e,r){var map={"./af":226,"./af.js":226,"./ar":227,"./ar-dz":228,"./ar-dz.js":228,"./ar-kw":229,"./ar-kw.js":229,"./ar-ly":230,"./ar-ly.js":230,"./ar-ma":231,"./ar-ma.js":231,"./ar-sa":232,"./ar-sa.js":232,"./ar-tn":233,"./ar-tn.js":233,"./ar.js":227,"./az":234,"./az.js":234,"./be":235,"./be.js":235,"./bg":236,"./bg.js":236,"./bm":237,"./bm.js":237,"./bn":238,"./bn.js":238,"./bo":239,"./bo.js":239,"./br":240,"./br.js":240,"./bs":241,"./bs.js":241,"./ca":242,"./ca.js":242,"./cs":243,"./cs.js":243,"./cv":244,"./cv.js":244,"./cy":245,"./cy.js":245,"./da":246,"./da.js":246,"./de":247,"./de-at":248,"./de-at.js":248,"./de-ch":249,"./de-ch.js":249,"./de.js":247,"./dv":250,"./dv.js":250,"./el":251,"./el.js":251,"./en-au":252,"./en-au.js":252,"./en-ca":253,"./en-ca.js":253,"./en-gb":254,"./en-gb.js":254,"./en-ie":255,"./en-ie.js":255,"./en-il":256,"./en-il.js":256,"./en-in":257,"./en-in.js":257,"./en-nz":258,"./en-nz.js":258,"./en-sg":259,"./en-sg.js":259,"./eo":260,"./eo.js":260,"./es":261,"./es-do":262,"./es-do.js":262,"./es-us":263,"./es-us.js":263,"./es.js":261,"./et":264,"./et.js":264,"./eu":265,"./eu.js":265,"./fa":266,"./fa.js":266,"./fi":267,"./fi.js":267,"./fil":268,"./fil.js":268,"./fo":269,"./fo.js":269,"./fr":270,"./fr-ca":271,"./fr-ca.js":271,"./fr-ch":272,"./fr-ch.js":272,"./fr.js":270,"./fy":273,"./fy.js":273,"./ga":274,"./ga.js":274,"./gd":275,"./gd.js":275,"./gl":276,"./gl.js":276,"./gom-deva":277,"./gom-deva.js":277,"./gom-latn":278,"./gom-latn.js":278,"./gu":279,"./gu.js":279,"./he":280,"./he.js":280,"./hi":281,"./hi.js":281,"./hr":282,"./hr.js":282,"./hu":283,"./hu.js":283,"./hy-am":284,"./hy-am.js":284,"./id":285,"./id.js":285,"./is":286,"./is.js":286,"./it":287,"./it-ch":288,"./it-ch.js":288,"./it.js":287,"./ja":289,"./ja.js":289,"./jv":290,"./jv.js":290,"./ka":291,"./ka.js":291,"./kk":292,"./kk.js":292,"./km":293,"./km.js":293,"./kn":294,"./kn.js":294,"./ko":295,"./ko.js":295,"./ku":296,"./ku.js":296,"./ky":297,"./ky.js":297,"./lb":298,"./lb.js":298,"./lo":299,"./lo.js":299,"./lt":300,"./lt.js":300,"./lv":301,"./lv.js":301,"./me":302,"./me.js":302,"./mi":303,"./mi.js":303,"./mk":304,"./mk.js":304,"./ml":305,"./ml.js":305,"./mn":306,"./mn.js":306,"./mr":307,"./mr.js":307,"./ms":308,"./ms-my":309,"./ms-my.js":309,"./ms.js":308,"./mt":310,"./mt.js":310,"./my":311,"./my.js":311,"./nb":312,"./nb.js":312,"./ne":313,"./ne.js":313,"./nl":314,"./nl-be":315,"./nl-be.js":315,"./nl.js":314,"./nn":316,"./nn.js":316,"./oc-lnc":317,"./oc-lnc.js":317,"./pa-in":318,"./pa-in.js":318,"./pl":319,"./pl.js":319,"./pt":320,"./pt-br":321,"./pt-br.js":321,"./pt.js":320,"./ro":322,"./ro.js":322,"./ru":323,"./ru.js":323,"./sd":324,"./sd.js":324,"./se":325,"./se.js":325,"./si":326,"./si.js":326,"./sk":327,"./sk.js":327,"./sl":328,"./sl.js":328,"./sq":329,"./sq.js":329,"./sr":330,"./sr-cyrl":331,"./sr-cyrl.js":331,"./sr.js":330,"./ss":332,"./ss.js":332,"./sv":333,"./sv.js":333,"./sw":334,"./sw.js":334,"./ta":335,"./ta.js":335,"./te":336,"./te.js":336,"./tet":337,"./tet.js":337,"./tg":338,"./tg.js":338,"./th":339,"./th.js":339,"./tk":340,"./tk.js":340,"./tl-ph":341,"./tl-ph.js":341,"./tlh":342,"./tlh.js":342,"./tr":343,"./tr.js":343,"./tzl":344,"./tzl.js":344,"./tzm":345,"./tzm-latn":346,"./tzm-latn.js":346,"./tzm.js":345,"./ug-cn":347,"./ug-cn.js":347,"./uk":348,"./uk.js":348,"./ur":349,"./ur.js":349,"./uz":350,"./uz-latn":351,"./uz-latn.js":351,"./uz.js":350,"./vi":352,"./vi.js":352,"./x-pseudo":353,"./x-pseudo.js":353,"./yo":354,"./yo.js":354,"./zh-cn":355,"./zh-cn.js":355,"./zh-hk":356,"./zh-hk.js":356,"./zh-mo":357,"./zh-mo.js":357,"./zh-tw":358,"./zh-tw.js":358};function n(t){var e=o(t);return r(e)}function o(t){if(!r.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}n.keys=function(){return Object.keys(map)},n.resolve=o,t.exports=n,n.id=361},363:function(t,e,r){"use strict";r.r(e);r(11),r(33);var n=r(10),o=r(362),l=o.b.reactiveProp,c={extends:o.a,mixins:[l],props:["chartData","options"],watch:{chartData:function(){console.log("chartData updated."),this.$data._chart.update()}},mounted:function(){this.draw()},methods:{draw:function(){this.renderChart(this.chartData,this.options)}}},j=r(48),d=Object(j.a)(c,void 0,void 0,!1,null,null,null).exports,m=[{value:"buy",text:"购买价格"},{value:"day1_am",text:"周一 上午"},{value:"day1_pm",text:"周一 下午"},{value:"day2_am",text:"周二 上午"},{value:"day2_pm",text:"周二 下午"},{value:"day3_am",text:"周三 上午"},{value:"day3_pm",text:"周三 下午"},{value:"day4_am",text:"周四 上午"},{value:"day4_pm",text:"周四 下午"},{value:"day5_am",text:"周五 上午"},{value:"day5_pm",text:"周五 下午"},{value:"day6_am",text:"周六 上午"},{value:"day6_pm",text:"周六 下午"}],h=m.map((function(t){return t.text})),v={components:{LineChart:d},data:function(){return{price:{},targetUserID:"",selectTimeOptions:m,updateForm:{type:"",price:"",week:""},chartData:null,chartOptions:{responsive:!0,maintainAspectRatio:!1},tableData:[]}},computed:{loggedIn:function(){return this.$auth.loggedIn},showLoginAlert:function(){return!this.loggedIn}},mounted:function(){""!=this.$route.hash&&(this.targetUserID=this.$route.hash.substring(1)),this.updateData()},methods:{updateData:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("user/price");case 3:r=e.sent,n=r.data,console.log(n),t.price=n.price,t.updateChart(),e.next=18;break;case 10:if(e.prev=10,e.t0=e.catch(0),console.log(e.t0.response),403!=e.t0.response.status){e.next=17;break}return t.$router.replace("/login/"),e.abrupt("return");case 17:alert("Error: "+e.t0.response.data);case 18:case"end":return e.stop()}}),e,null,[[0,10]])})))()},updateChart:function(){var t=this.price,e=[];m.forEach((function(r){console.log(r),e.push(t[r.value])}));var r=e.reverse();console.log(r);var n=[],o=!1;r.forEach((function(t){o?n.push(t):0!=t&&(o=!0,n.push(t))}));var l={labels:h,datasets:[{label:"价格",backgroundColor:"#ffab00",data:[]}]};l.datasets[0].data=n.reverse(),console.info("chartData",l),this.chartData=l;var c=[];m.forEach((function(e){var r={"-":e.text,"价格":t[e.value],"较购买价":(t[e.value]/t.buy*100).toFixed(2)+" %","预测价格":"-"};c.push(r)})),this.tableData=c},updatePrice:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),console.log(JSON.stringify(e.updateForm)),r.prev=2,(n=e.updateForm).price=parseInt(n.price),r.next=7,e.$axios.post("user/price/update",e.updateForm);case 7:if(o=r.sent,(l=o.data).ok){r.next=12;break}return alert("update failed"),r.abrupt("return");case 12:e.price=l.price,e.updateChart(),r.next=20;break;case 16:return r.prev=16,r.t0=r.catch(2),alert("Err:"+data.err),r.abrupt("return");case 20:case"end":return r.stop()}}),r,null,[[2,16]])})))()}}},f=Object(j.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("本周")]),t._v(" "),r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.price-input",modifiers:{"price-input":!0}}],attrs:{variant:"success"}},[t._v("添加数据")]),t._v(" "),r("b-collapse",{staticClass:"mt-2",attrs:{id:"price-input"}},[r("b-alert",{attrs:{show:t.showLoginAlert}},[t._v("登录后添加数据"),r("b-btn",{attrs:{variant:"link",to:"/login"}},[t._v("/login")])],1),t._v(" "),t.loggedIn?r("p",[r("b-form",{on:{submit:t.updatePrice}},[r("b-form-group",{attrs:{id:"ig-time",label:"时间:","label-for":"i-time",description:""}},[r("b-form-select",{attrs:{options:t.selectTimeOptions},model:{value:t.updateForm.type,callback:function(e){t.$set(t.updateForm,"type",e)},expression:"updateForm.type"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"ig-price",label:"价格","label-for":"i-price"}},[r("b-form-input",{attrs:{type:"number",min:"1",required:""},model:{value:t.updateForm.price,callback:function(e){t.$set(t.updateForm,"price",e)},expression:"updateForm.price"}})],1),t._v(" "),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("提交")])],1)],1):t._e()],1),t._v(" "),r("line-chart",{attrs:{chartData:t.chartData,options:t.chartOptions}}),t._v(" "),r("b-table",{attrs:{striped:"",hover:"",small:"",bordered:"",fixed:"",items:t.tableData}})],1)}),[],!1,null,null,null);e.default=f.exports}}]);